# 假名记忆器 (Kana Trainer)

一个功能完整的日语假名学习工具，支持间隔重复学习、进度统计和JMdict词典集成。

## ✨ 主要功能

- 📅 **每日复习模式**：优先出到期复习的假名，确保学习效率
- 🎯 **自由练习模式**：按错题权重随机出题，针对性训练
- 📊 **学习统计**：详细的每日答题数和正确率记录
- 🏆 **错题排行榜**：显示最常出错的假名，帮助重点突破
- 📈 **进度可视化**：支持终端图表和matplotlib图表显示
- 🔄 **JMdict词典**：集成日语词典，支持在线更新
- 🎨 **现代化UI**：基于Rich和InquirerPy的彩色终端界面

## 🏗️ 项目架构

项目采用模块化设计，代码结构清晰：

```
kana_trainer/
├── main.py              # 主程序入口和菜单系统
├── trainer.py           # 核心训练逻辑模块
├── data_manager.py      # 数据管理和间隔重复算法
├── stats_manager.py     # 统计分析和图表生成
├── kana_data.py         # 假名字典数据
├── config.py            # 配置管理
├── JMdict/              # JMdict词典模块
│   ├── command.py       # 词典更新命令
│   ├── load_jmdict.py   # 词典加载逻辑
│   └── schema.py        # 词典数据结构
├── requirements.txt      # 项目依赖
├── ruff.toml           # 代码质量配置
└── README.md           # 项目文档
```

## 🚀 快速开始

### 环境要求
- Python 3.7+
- 支持彩色终端的操作系统

### 安装步骤

1. 克隆项目：
```bash
git clone <repository-url>
cd kana_trainer
```

2. 创建虚拟环境（推荐）：
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate     # Windows
```

3. 安装依赖：
```bash
pip install -r requirements.txt
```

4. 运行程序：
```bash
python main.py
```

## 🎯 使用指南

### 主菜单选项

- **📅 每日复习**：优先出到期复习的假名，适合日常巩固
- **🎯 自由练习**：按错题权重随机出题，适合查漏补缺
- **📊 查看统计**：查看学习进度和答题趋势
- **🏆 错题排行榜**：了解最需要加强的假名
- **🔄 更新词典**：更新JMdict日语词典数据
- **🚪 退出**：安全退出程序

### 学习模式

#### 每日复习模式
- 自动筛选需要复习的假名
- 基于间隔重复算法安排复习时间
- 答对后自动延长复习间隔

#### 自由练习模式
- 支持所有假名的练习
- 错题权重系统，出错越多的假名出现概率越高
- 实时显示答题进度和正确率

## 🧠 学习算法

### 间隔重复算法
- **答对机制**：复习间隔翻倍（可配置倍数）
- **答错机制**：重置间隔为1天，增加错题权重
- **权重系统**：错题次数越多，出现概率越高
- **自动清理**：长期答对且间隔足够长的假名自动从错题记录中删除

### 配置参数
- 最大权重：20
- 最小复习间隔：1天
- 最大复习间隔：90天
- 答对后间隔倍数：2

## 📊 数据管理

### 数据文件
- `wrong_kana.json`：错题记录、学习进度和复习间隔
- `stats.json`：每日学习统计数据（答题数/正确数）

### 统计功能
- 每日答题统计
- 正确率趋势分析
- 终端条形图显示
- matplotlib图表支持（可选）

## 🔧 技术特性

### 依赖包
- **Rich**：终端美化输出
- **InquirerPy**：交互式命令行界面
- **matplotlib**：图表生成（可选）
- **requests**：网络请求
- **pydantic**：数据验证

### 代码质量
- 使用Ruff进行代码格式化和检查
- 模块化设计，职责分离
- 完整的类型注解和文档字符串
- 错误处理和用户友好的提示信息

## 🌟 特色功能

### JMdict词典集成
- 支持在线更新日语词典
- 可配置代理设置
- 自动下载和解析词典数据

### 现代化终端界面
- 彩色输出和面板显示
- 进度条和状态指示
- 响应式菜单系统

### 智能学习建议
- 基于错题权重的智能出题
- 个性化复习计划
- 学习效果可视化

## 📝 开发说明

### 代码结构
- 每个模块都有明确的职责
- 配置文件集中管理常量
- 数据管理器处理所有文件操作
- 统计管理器负责数据分析和展示

### 扩展性
- 易于添加新的学习模式
- 支持自定义配置参数
- 模块化设计便于功能扩展

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发环境设置
```bash
pip install -r requirements.txt
pip install ruff  # 代码质量工具
```

### 代码规范
- 使用Ruff进行代码格式化
- 遵循PEP 8编码规范
- 添加适当的类型注解和文档字符串

## 📄 许可证

本项目采用MIT许可证，详见[LICENSE](LICENSE)文件。

## 🙏 致谢

- 感谢JMdict项目提供的日语词典数据
- 感谢所有开源项目的贡献者

---

**开始你的日语假名学习之旅吧！** 🎌✨
